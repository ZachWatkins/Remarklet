define(["jquery"],function(n){var t,o,i=function(n){"string"==typeof n.form?u.form.html(n.form):(o=n.form,u.form.append(n.form)),n.init(),u.window.show(),u.content.css({"margin-top":function(){return-1*(u.content.innerHeight()/2)}}),u.form.find("input,textarea").first().focus(),t=n.callback},e=function(){var n={};u.form.find("*[name]").each(function(){n[this.name]=this.value}),t(n),r()},r=function(){u.window.focus().blur().hide(),o&&o.remove(),u.form.html("")},u={window:n("<div></div>").on("keydown",f),form:n("<div></div>"),content:n("<div></div>"),submit:n('<button type="button">Submit</button>').on("click",e),cancel:n('<button type="button">Cancel</button>').on("click",r)},f=function(n){n.stopPropagation(),27==n.keyCode&&(n.preventDefault(),r())};return{init:function(n){var t;for(t in u)u[t].attr("id",n+"-prompt-"+t);u.content.append(u.form).append(u.submit).append(u.cancel).appendTo(u.window),u.window.appendTo("body")},get:{window:function(){return u.window},form:function(){return u.form},submit:function(){return u.submit}},open:i}});