define(function(){var t,r,e={},n={},o=n.hasOwnProperty,i=function(r,n){return n?e[r]=n:e=r,localStorage[t]=JSON.stringify(e),this};return{init:function(n,o){var i,a;if(t=n,e=r=o,void 0!==localStorage[n]){a=JSON.parse(localStorage[n]);for(i in a)e[i]=a[i]}else localStorage[n]=JSON.stringify(o);return this},get:function(t){return t?e[t]:e},set:i,reset:function(){return i(r),localStorage.removeItem(t),this},subscribe:function(t,r){o.call(n,t)||(n[t]=[]);var e=n[t].push(r)-1;return{remove:function(){delete n[t][e]}}},publish:function(t,r){o.call(n,t)&&n[t].forEach(function(t){t(void 0!==r?r:{})})}}});