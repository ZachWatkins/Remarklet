<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            http-equiv="X-UA-Compatible"
            content="IE=edge"
        />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
        />
        <link
            rel="stylesheet"
            href="./src/index.css"
        />
    </head>
    <body>
        <div class="row text-left">
            <img
                src="./images/icon-32.png"
                alt="Remarklet Logo"
            />
            <h1>Remarklet</h1>
        </div>
        <div class="row"
            ><div class="col"
                ><button
                    id="btn_on"
                    value="On"
                    class="w-1/2 off"
                    >On</button
                ><button
                    id="btn_off"
                    value="Off"
                    class="w-1/2"
                    >Off</button
                > </div
            ><div class="col"
                ><button
                    id="btn_save"
                    value="Save"
                    class="w-1/2"
                    >Save</button
                ><button
                    id="btn_reset"
                    value="Reset"
                    class="w-1/2 off"
                    >Reset</button
                ></div
            ></div
        >
        <div class="row"
            ><div class="col"
                ><button
                    id="btn_add_note"
                    value="Add Note"
                    >Add Note</button
                ></div
            ><div class="col"
                ><button
                    id="btn_export"
                    value="Export"
                    >Export</button
                ></div
            ></div
        >
        <div class="row"
            ><div class="col"
                ><button
                    id="btn_add_image"
                    value="Add Image"
                    >Add Image</button
                ></div
            ><div class="col"
                ><button
                    id="btn_show_grid"
                    value="Show Grid"
                    >Show Grid</button
                ><button
                    id="btn_hide_grid"
                    value="Hide Grid"
                    class="hidden"
                    >Hide Grid</button
                ></div
            ></div
        >
        <div class="row"
            ><div class="col"
                ><button
                    id="btn_add_code"
                    value="Add Code"
                    >Add Code</button
                ></div
            ><div class="col"
                ><button
                    id="btn_show_styles"
                    value="Show Styles"
                    >Show Styles</button
                ><button
                    id="btn_hide_styles"
                    value="Hide Styles"
                    class="hidden"
                    >Hide Styles</button
                ></div
            ></div
        >
        <div class="row"
            ><div class="col"></div
            ><div class="col"
                ><button
                    id="btn_show_outline"
                    value="Show Outline"
                    >Show Outline</button
                ><button
                    id="btn_hide_outline"
                    value="Hide Outline"
                    class="hidden"
                    >Hide Outline</button
                ></div
            ></div
        >
        <div class="row"
            ><div class="col text-right"
                ><a
                    href="https://zacharywatkins.com/portfolio/remarklet/"
                    target="_blank"
                    >Website</a
                ></div
            ><div class="col text-left"
                ><a
                    href="https://github.com/zachwatkins/remarklet/blob/main/PRIVACY.md"
                    target="_blank"
                    >Privacy</a
                ></div
            ></div
        >
        <script>
            const STATE = {
                on: false,
                showGrid: false,
                showOutline: false,
            };

            function setState(key, value) {
                Object.assign(STATE, { [key]: value });
                chrome.storage.local.set({ [key]: value });
                chrome.tabs.query(
                    { active: true, currentWindow: true },
                    function (tabs) {
                        chrome.tabs.sendMessage(tabs[0].id, {
                            action: key,
                            value,
                        });
                    },
                );
            }

            window.btn_on.addEventListener('click', function () {
                if (!STATE['on']) {
                    window.btn_on.classList.remove('off');
                    window.btn_off.classList.add('off');
                    setState('on', true);
                }
            });
            window.btn_off.addEventListener('click', function () {
                if (STATE['on']) {
                    window.btn_on.classList.add('off');
                    window.btn_off.classList.remove('off');
                    setState('on', false);
                }
            });
            window.export.addEventListener('click', function () {
                window.alert('not implemented');
            });
            window.save.addEventListener('click', function () {
                window.alert('not implemented');
            });
            window.reset.addEventListener('click', function () {
                window.alert('not implemented');
            });
            window.btn_show_outline.addEventListener('click', function () {
                if (!STATE['showOutline']) {
                    window.btn_show_outline.classList.add('hidden');
                    window.btn_hide_outline.classList.remove('hidden');
                    setState('showOutline', true);
                }
            });
            window.btn_hide_outline.addEventListener('click', function () {
                if (STATE['showOutline']) {
                    window.btn_show_outline.classList.remove('hidden');
                    window.btn_hide_outline.classList.add('hidden');
                    setState('showOutline', false);
                }
            });
            window.btn_show_grid.addEventListener('click', function () {
                if (!STATE['showGrid']) {
                    window.btn_show_grid.classList.add('hidden');
                    window.btn_hide_grid.classList.remove('hidden');
                    setState('showGrid', true);
                }
            });
            window.btn_hide_grid.addEventListener('click', function () {
                if (STATE['showGrid']) {
                    window.btn_show_grid.classList.remove('hidden');
                    window.btn_hide_grid.classList.add('hidden');
                    setState('showGrid', false);
                }
            });
            window.btn_show_styles.addEventListener('click', function () {
                if (!STATE['showStyles']) {
                    window.btn_show_styles.classList.add('hidden');
                    window.btn_hide_styles.classList.remove('hidden');
                    setState('showStyles', true);
                }
            });
            window.btn_hide_styles.addEventListener('click', function () {
                if (STATE['showStyles']) {
                    window.btn_show_styles.classList.remove('hidden');
                    window.btn_hide_styles.classList.add('hidden');
                    setState('showStyles', false);
                }
            });
            window.btn_add_image.addEventListener('click', function () {
                window.alert('not implemented');
            });
            window.btn_add_note.addEventListener('click', function () {
                window.alert('not implemented');
            });
            window.btn_add_code.addEventListener('click', function () {
                window.alert('not implemented');
            });
            window.btn_show_help.addEventListener('click', function () {
                window.alert('not implemented');
            });
        </script>
    </body>
</html>
